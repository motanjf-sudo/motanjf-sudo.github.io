<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Nova Chat</title>
<style>
/* === CSS SAME AS YOUR CODE – UNCHANGED === */
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);height:100vh}
.auth-container{display:flex;justify-content:center;align-items:center;height:100vh}
.auth-box{background:#fff;padding:40px;border-radius:20px;width:350px}
.auth-tabs{display:flex;margin-bottom:20px}
.auth-tab{flex:1;padding:10px;border:none;background:none;cursor:pointer}
.auth-tab.active{border-bottom:2px solid #667eea;font-weight:bold}
.auth-form{display:none}
.auth-form.active{display:block}
.auth-btn{width:100%;padding:12px;background:#667eea;color:#fff;border:none;border-radius:8px}
.error-message{display:none;color:red;margin-bottom:10px}
.error-message.show{display:block}
</style>
</head>

<body>

<div class="auth-container" id="authContainer">
  <div class="auth-box">
    <h2>Nova Chat</h2>

    <div class="error-message" id="authError"></div>

    <div class="auth-tabs">
      <button class="auth-tab active" data-tab="login">Login</button>
      <button class="auth-tab" data-tab="signup">Sign Up</button>
    </div>

    <form id="loginForm" class="auth-form active">
      <input id="loginUsername" placeholder="Username" required /><br><br>
      <input id="loginPassword" type="password" placeholder="Password" required /><br><br>
      <button class="auth-btn">Login</button>
    </form>

    <form id="signupForm" class="auth-form">
      <input id="signupUsername" placeholder="Username" required /><br><br>
      <input id="signupPassword" type="password" placeholder="Password" required /><br><br>
      <button class="auth-btn">Sign Up</button>
    </form>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
/* ===== FIREBASE CONFIG (بجاش مال خودت) ===== */
firebase.initializeApp({
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com"
});

const auth = firebase.auth();

/* ====== FIX قطعی سوییچ تب‌ها ====== */
function initAuthTabs() {
  document.addEventListener("click", (e) => {
    const tab = e.target.closest(".auth-tab");
    if (!tab) return;

    const name = tab.dataset.tab;

    document.querySelectorAll(".auth-tab").forEach(t => t.classList.remove("active"));
    document.querySelectorAll(".auth-form").forEach(f => f.classList.remove("active"));

    tab.classList.add("active");
    document.getElementById(name + "Form").classList.add("active");
  });
}

/* ===== LOGIN ===== */
document.getElementById("loginForm").addEventListener("submit", async e => {
  e.preventDefault();
  const u = loginUsername.value.trim();
  const p = loginPassword.value;
  try {
    await auth.signInWithEmailAndPassword(`${u}@nova.local`, p);
    alert("Login OK");
  } catch {
    showError("Login failed");
  }
});

/* ===== SIGNUP ===== */
document.getElementById("signupForm").addEventListener("submit", async e => {
  e.preventDefault();
  const u = signupUsername.value.trim();
  const p = signupPassword.value;
  try {
    await auth.createUserWithEmailAndPassword(`${u}@nova.local`, p);
    alert("Signup OK");
  } catch {
    showError("Signup failed");
  }
});

function showError(msg){
  const el=document.getElementById("authError");
  el.textContent=msg;
  el.classList.add("show");
}

/* ===== INIT ===== */
document.addEventListener("DOMContentLoaded", initAuthTabs);
</script>

</body>
</html>
