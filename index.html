<!-- Firebase compat SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {

    // Firebase config
    var firebaseConfig = {
      apiKey: "AIzaSyDybhWHcf85KDoBYdFWYIPCH0df3oKy7vU",
      authDomain: "nova-chat-408a2.firebaseapp.com",
      databaseURL: "https://nova-chat-408a2-default-rtdb.firebaseio.com",
      projectId: "nova-chat-408a2",
      storageBucket: "nova-chat-408a2.firebasestorage.app",
      messagingSenderId: "481208222196",
      appId: "1:481208222196:web:40a1c47adb6dd3ec77f9a1"
    };

    // Init Firebase
    firebase.initializeApp(firebaseConfig);
    var database = firebase.database();
    var messagesRef = database.ref("messages");

    var input = document.getElementById("input");
    var messages = document.getElementById("messages");

    function send() {
      if (!input.value.trim()) return;
      messagesRef.push({ text: input.value });
      input.value = "";
    }

    input.addEventListener("keydown", function (e) {
      if (e.key === "Enter") send();
    });

    messagesRef.limitToLast(50).on("child_added", function (snapshot) {
      var div = document.createElement("div");
      div.className = "msg";
      div.innerText = snapshot.val().text;
      messages.appendChild(div);
      messages.scrollTop = messages.scrollHeight;
    });

  });
</script>
