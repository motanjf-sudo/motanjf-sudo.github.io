<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù…ÛŒØ±Ø·Ø§Ù‡Ø§</title>

<style>
body{
margin:0;
font-family:Tahoma;
background:linear-gradient(135deg,#667eea,#764ba2);
height:100vh;
display:flex;
justify-content:center;
align-items:center;
}
.app{
width:100%;
max-width:900px;
height:90vh;
background:#0f172a;
border-radius:20px;
display:flex;
flex-direction:column;
overflow:hidden;
box-shadow:0 20px 60px rgba(0,0,0,.4);
}
.header{
padding:20px;
background:#1e293b;
color:white;
font-size:22px;
font-weight:bold;
text-align:center;
}
.chat{
flex:1;
overflow:auto;
padding:20px;
display:flex;
flex-direction:column;
gap:10px;
}
.msg{
max-width:70%;
padding:12px;
border-radius:12px;
white-space:pre-wrap;
}
.user{
align-self:flex-end;
background:#6366f1;
color:white;
}
.ai{
align-self:flex-start;
background:#334155;
color:white;
}
.input-area{
display:flex;
padding:15px;
background:#1e293b;
gap:10px;
}
textarea{
flex:1;
padding:12px;
border-radius:10px;
border:none;
resize:none;
font-family:Tahoma;
font-size:15px;
}
button{
padding:12px 20px;
border:none;
border-radius:10px;
background:#6366f1;
color:white;
cursor:pointer;
font-weight:bold;
}
button:disabled{
opacity:.6;
cursor:not-allowed;
}
</style>
</head>
<body>

<div class="app">
<div class="header">Ø§Ù…ÛŒØ±Ø·Ø§Ù‡Ø§ - Ú†Øª Ø¨Ø§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ ğŸ¤–</div>

<div class="chat" id="chat">
<div class="msg ai">Ø³Ù„Ø§Ù… ğŸ‘‹ Ù‡Ø± Ø³ÙˆØ§Ù„ÛŒ Ø¯Ø§Ø±ÛŒ Ø¨Ù¾Ø±Ø³.</div>
</div>

<div class="input-area">
<textarea id="input" rows="1" placeholder="Ù¾ÛŒØ§Ù…Øª Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³..."></textarea>
<button id="send">Ø§Ø±Ø³Ø§Ù„</button>
</div>
</div>

<script>
const API_KEY = "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";
const chat = document.getElementById("chat");
const input = document.getElementById("input");
const sendBtn = document.getElementById("send");

let history = [
{ role: "system", content: "You are a helpful assistant. Reply in Persian." }
];

function addMessage(text, role){
const div = document.createElement("div");
div.className = "msg " + (role === "user" ? "user" : "ai");
div.textContent = text;
chat.appendChild(div);
chat.scrollTop = chat.scrollHeight;
}

async function sendMessage(){
const text = input.value.trim();
if(!text) return;

addMessage(text,"user");
input.value="";
sendBtn.disabled = true;

history.push({ role:"user", content:text });

try{
const res = await fetch("https://openrouter.ai/api/v1/chat/completions",{
method:"POST",
headers:{
"Authorization":"Bearer " + API_KEY,
"Content-Type":"application/json"
},
body:JSON.stringify({
model:"openai/gpt-4o-mini",
messages:history
})
});

const data = await res.json();
const reply = data.choices[0].message.content;

addMessage(reply,"ai");
history.push({ role:"assistant", content:reply });

}catch(e){
addMessage("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ âŒ","ai");
console.error(e);
}

sendBtn.disabled = false;
}

sendBtn.onclick = sendMessage;

input.addEventListener("keydown",function(e){
if(e.key==="Enter" && !e.shiftKey){
e.preventDefault();
sendMessage();
}
});
</script>

</body>
</html>
