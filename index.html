<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NovaChat</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system;
  background:#e5ddd5;
}
.app{
  max-width:420px;
  height:100vh;
  margin:auto;
  background:#fff;
  display:flex;
  flex-direction:column;
}

/* HEADER */
header{
  background:#075e54;
  color:white;
  padding:14px;
  text-align:center;
  font-size:18px;
  font-weight:600;
}

/* CHAT LIST */
.chat-list{
  flex:1;
  overflow-y:auto;
}
.chat-item{
  display:flex;
  padding:12px;
  border-bottom:1px solid #eee;
  cursor:pointer;
}
.chat-item:hover{background:#f5f5f5}
.avatar{
  width:48px;
  height:48px;
  border-radius:50%;
  background:#bbb;
  margin-left:10px;
}
.chat-info{flex:1}
.chat-name{font-weight:600}
.chat-preview{font-size:13px;color:#555}

/* CHAT */
.chat{
  display:none;
  flex:1;
  flex-direction:column;
  background:#e5ddd5;
}
.messages{
  flex:1;
  padding:10px;
  overflow-y:auto;
}
.msg{
  max-width:75%;
  margin-bottom:8px;
  padding:8px 10px;
  border-radius:7px;
  font-size:14px;
  word-wrap:break-word;
}
.me{
  background:#dcf8c6;
  margin-left:auto;
}
.other{background:#fff}
.time{
  font-size:11px;
  opacity:.5;
  text-align:right;
}

/* INPUT */
.input-bar{
  display:flex;
  padding:8px;
  background:#f0f0f0;
}
.input-bar textarea{
  flex:1;
  resize:none;
  border:none;
  border-radius:20px;
  padding:10px;
  outline:none;
  height:40px;
}
.input-bar button{
  margin-right:6px;
  border:none;
  background:#075e54;
  color:white;
  width:40px;
  border-radius:50%;
  font-size:18px;
}
</style>
</head>

<body>

<div class="app">

<header id="title">NovaChat</header>

<!-- CHAT LIST -->
<div class="chat-list" id="list">
  <div class="chat-item" onclick="openChat('Family Group')">
    <div class="avatar"></div>
    <div class="chat-info">
      <div class="chat-name">Family Group</div>
      <div class="chat-preview">آخرین پیام…</div>
    </div>
  </div>
</div>

<!-- CHAT -->
<div class="chat" id="chat">
  <div class="messages" id="messages"></div>

  <div class="input-bar">
    <textarea id="input" placeholder="پیام بنویس…"></textarea>
    <button onclick="send()">➤</button>
  </div>
</div>

</div>

<script>
let currentChat="";
const username="You";

/* OPEN CHAT */
function openChat(name){
  currentChat=name;
  title.innerText=name;
  list.style.display="none";
  chat.style.display="flex";
  messages.innerHTML="";
  load();
}

/* SEND MESSAGE */
function send(){
  const text=input.value.trim();
  if(!text)return;

  const time=new Date().toLocaleTimeString([],{
    hour:"2-digit",minute:"2-digit"
  });

  const msg={user:username,text,time};
  const data=JSON.parse(localStorage.getItem(currentChat)||"[]");
  data.push(msg);
  localStorage.setItem(currentChat,JSON.stringify(data));
  input.value="";
  show(msg);
}

/* SHOW MESSAGE */
function show(m){
  const d=document.createElement("div");
  d.className="msg me";
  d.innerHTML=`${m.text}<div class="time">${m.time}</div>`;
  messages.appendChild(d);
  messages.scrollTop=messages.scrollHeight;
}

/* LOAD */
function load(){
  const data=JSON.parse(localStorage.getItem(currentChat)||"[]");
  data.forEach(show);
}

/* ENTER TO SEND */
input.addEventListener("keydown",e=>{
  if(e.key==="Enter" && !e.shiftKey){
    e.preventDefault();
    send();
  }
});
</script>

</body>
</html>
